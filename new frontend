<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Device Dashboard</title>


  <!-- >>>>>>>>>>>>>>>>>>>> -->
  <!-- <link rel="icon" type="image/png" href="images/favicon-96x96.png"/> -->

  <!-- >>>>>>>>>>>>>>>>>>>> -->
  <link rel="icon" href="images/favicon.png" sizes="32x32" type="images/png">

  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="graph.css">
  <link rel="stylesheet" href="sidebar.css">
  <link rel="stylesheet" href="newcss.css"> 
  <link rel="stylesheet" href="map.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">


  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- inside <head> or before body end, add Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


  <!-- map js link here ðŸ“ðŸ“ðŸ“ðŸ“ðŸ“ðŸ“â¬‡ï¸â¬‡ï¸ -->

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- MarkerCluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>

  <!-- Heatmap -->
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>

  <!-- Turf (optional spatial ops) -->
  <script src="https://unpkg.com/@turf/turf/turf.min.js"></script>
  <!-- map js link here ðŸ“ðŸ“ðŸ“ðŸ“ðŸ“ðŸ“ -->

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>



  <!-- Enhanced Door Popup Modal -->
  <div id="door-modal" style="  
  display:none;  
  position:fixed;  
  top:0; left:0;  
  width:100%; height:100%;  
  background:rgba(0,0,0,0.7);  
  backdrop-filter: blur(5px);
  z-index:1000;  
  justify-content:center;  
  align-items:center;  
  animation:fadeIn 0.3s ease;
">
    <div style="  
  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
  border-radius:16px;  
  width:90%;
  max-width:750px;
  max-height:85%;  
  overflow-y:auto;  
  padding:0;
  box-shadow:0 20px 60px rgba(0,0,0,0.3), 0 0 0 1px rgba(255,255,255,0.1);
  position:relative;  
  border:1px solid rgba(255,255,255,0.2);
  font-family: 'Segoe UI', system-ui, sans-serif;
">
      <div style="
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding:20px 25px;
    border-radius:16px 16px 0 0;
    color:white;
    position:sticky;
    top:0;
    z-index:10;
  ">
        <span id="close-door-modal" style="  
      position:absolute;  
      top:20px; right:25px;  
      cursor:pointer;  
      font-size:28px;  
      font-weight:300;  
      transition:transform 0.2s;
      width:32px;
      height:32px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:50%;
      background:rgba(255,255,255,0.2);
    ">Ã—</span>
        <h2 style="margin:0; font-size:1.5rem; font-weight:600;">Controller Details</h2>
      </div>
      <div id="door-modal-content" style="padding:25px;"></div>
    </div>
  </div>

  <style>
    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .device-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
      cursor: pointer;
      border: 1px solid #e2e8f0;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.04);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      animation: slideUp 0.4s ease;
    }

    .device-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      border-color: #667eea;
    }

    .status-badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 500;
      gap: 6px;
    }

    .status-badge::before {
      content: '';
      width: 8px;
      height: 8px;
      border-radius: 50%;
      display: inline-block;
    }

    .status-online {
      background: #f0f9ff;
      color: #0369a1;
      border: 1px solid #bae6fd;
    }

    .status-online::before {
      background: #0ea5e9;
    }

    .status-offline {
      background: #fef2f2;
      color: #dc2626;
      border: 1px solid #fecaca;
    }

    .status-offline::before {
      background: #ef4444;
    }

    .door-item {
      background: white;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 18px;
      margin-bottom: 12px;
      transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    }

    .door-item:hover {
      border-color: #c7d2fe;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>



  <button id="scrollToTopBtn" title="Go to top">
    <i class="bi bi-chevron-double-up"></i>
  </button>

  <div id="region-title" class="dashboard-header">
    <div class="region-logo">
    </div>

  </div>


  <section class="summary-section">

    <div class="summary">
      <div class="card">

        <h3><i class="fas fa-microchip icon-3d"></i> Total Devices</h3>
        <div class="card-status total">Total <span id="total-devices">0</span></div>
        <div class="card-status online">Online <span id="online-devices">0</span></div>
        <div class="card-status offline">Offline <span id="offline-devices">0</span></div>
      </div>

      <div class="card">
        <h3><i class="fas fa-video icon-3d"></i> Cameras</h3>
        <div class="card-status total">Total <span id="camera-total">0</span></div>
        <div class="card-status online">Online <span id="camera-online">0</span></div>
        <div class="card-status offline">Offline <span id="camera-offline">0</span></div>
      </div>



      <div class="card">
        <h3><i class="fas fa-database icon-3d"></i> Archivers</h3>

        <div class="card-status total">Total <span id="archiver-total">0</span></div>
        <div class="card-status online">Online <span id="archiver-online">0</span></div>
        <div class="card-status offline">Offline <span id="archiver-offline">0</span></div>
      </div>

      <div class="card">
        <h3><i class="fas fa-id-card icon-3d"></i> Controllers</h3>
        <div class="card-status total">Total <span id="controller-total">0</span></div>
        <div class="card-status online">Online <span id="controller-online">0</span></div>
        <div class="card-status offline">Offline <span id="controller-offline">0</span></div>
      </div>

      <div class="card" id="door-card">
        <h3><i class="fa-solid fa-door-closed icon-3d"></i>Door</h3>
        <div class="card-status total">Total <span id="doorReader-total">0</span></div>
        <div class="card-status online">Online <span id="doorReader-online">0</span></div>
        <div class="card-status offline">Offline <span id="doorReader-offline">0</span></div>
      </div>
      <div class="card">
        <h3><i class="fas fa-id-badge icon-3d"></i>Reader</h3>
        <div class="card-status total">Total <span id="reader-total-inline">0</span></div>
        <div class="card-status online">Online <span id="reader-online-inline">0</span></div>
        <div class="card-status offline">Offline <span id="reader-offline-inline">0</span></div>
      </div>

      <div class="card">
        <h3><i class="fas fa-server icon-3d"></i>CCURE</h3>
        <div class="card-status total">Total <span id="server-total">0</span></div>
        <div class="card-status online">Online <span id="server-online">0</span></div>
        <div class="card-status offline">Offline <span id="server-offline">0</span></div>
      </div>

      <div class="card">
        <h3><i class="fas fa-desktop icon-3d"></i>Desktop</h3>
        <div class="card-status total">Total <span id="pc-total">0</span></div>
        <div class="card-status online">Online <span id="pc-online">0</span></div>
        <div class="card-status offline">Offline <span id="pc-offline">0</span></div>
      </div>

      <div class="card">
        <h3><i class="fa-etch fa-solid fa-database icon-3d"></i>DB Server</h3>
        <div class="card-status total">Total <span id="db-total">0</span></div>
        <div class="card-status online">Online <span id="db-online">0</span></div>
        <div class="card-status offline">Offline <span id="db-offline">0</span></div>
      </div>


    </div>

  </section>

  <div class="container">
    <!-- Sidebar -->

    <!-- ðŸ“ðŸ“ðŸ“ðŸ“ðŸ“ new sidebar -->
    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggle" id="sidebarToggle">
      <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside id="sidebar">
      <div class="sidebar-header">
        <h2 class="sidebar-title"><i class="fas fa-sliders-h"></i> </h2>
        <div class="header-controls">
          <button class="theme-toggle" id="themeToggle">
            <i class="fas fa-moon"></i>
          </button>
        </div>
        <button class="close-sidebar" id="closeSidebar">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <button class="nav-button" id="toggle-main-btn"><i class="fas fa-window-maximize"></i>Device Details</button>

      <div class="region-buttons">
        <button class="region-button" data-region="global"><i class="fas fa-globe"></i> Global</button>
        <button class="region-button" data-region="apac"><i class="fas fa-map-marker-alt"></i> APAC</button>
        <button class="region-button" data-region="emea"><i class="fas fa-map-marker-alt"></i> EMEA</button>
        <button class="region-button" data-region="laca"><i class="fas fa-map-marker-alt"></i> LACA</button>
        <button class="region-button" data-region="namer"><i class="fas fa-map-marker-alt"></i> NAMER</button>
      </div>

      <button class="nav-button" onclick="location.href='trend.html'"><i class="fas fa-chart-line"></i> View Trend
        Analysis</button>
      <button class="nav-button" onclick="location.href='summary.html'"><i class="fas fa-table"></i> View Devices
        Summary</button>
      <button class="nav-button" onclick="location.href='controllers.html'"><i class="fas fa-table"></i> View Devices
        Door</button>

      <div id="countdown" class="countdown-timer" style="display: none;">Loading Timer...</div>

      <div class="filter-buttons">
        <button id="filter-all" class="status-filter active" data-status="all"><i class="fas fa-layer-group"></i> All
          Devices</button>
        <button id="filter-online" class="status-filter" data-status="online"><i class="fas fa-wifi"></i> Online
          Devices</button>
        <button id="filter-offline" class="status-filter" data-status="offline"><i class="fas fa-plug-circle-xmark"></i>
          Offline Devices</button>
      </div>

      <label for="device-filter">Filter by Device Type:</label>
      <select id="device-filter">
        <option value="all">All</option>
        <option value="cameras">Cameras</option>
        <option value="archivers">Archivers</option>
        <option value="controllers">Controllers</option>
        <option value="servers">CCURE</option>
        <option value="pcdetails">Desktop Details</option>
        <option value="dbdetails">DB Server</option>
      </select>

      <label for="vendorFilter" id="vendorFilterLabel">Filter by Camera:</label>
      <select id="vendorFilter">
        <option value="all">All camera</option>
      </select>

      <label for="city-filter">Filter by Location:</label>
      <select id="city-filter">
        <option value="all">All Cities</option>
      </select>
    </aside>



    <!-- Main Content -->


    <!-- new mian code startðŸ“ðŸ“ðŸ“ðŸ“ðŸ“ -->
    <main id="content">
      <section id="details-section" class="details-section">
        <div class="details-header">
          <h2><i class="fas fa-microchip"></i> Device Details</h2>
          <input type="text" id="device-search" placeholder="ðŸ” Search by IP, Location, City..." />
        </div>
        <div id="device-details" class="device-grid">Loading device data...</div>
        <div id="details-container" class="device-grid"></div>
      </section>

      <section id="main-graph" class="graphs-section">
        <div class="graphs-inner">

          <div class="graphs-grid dashboard-layout">
            <!-- Left 2x2 cards -->
            <div class="left-grid"">
              <div class=" gcard">
              <h4 class="gcard-title">Total No. of Cameras</h4>
              <div class="semi-donut gauge" id="gauge-cameras" data-fill="#12b76a"
                style="--percentage:0; --fill:#12b76a">
                <div class="gtext">
                  <b class="total">0</b>
                  <small><span class="active">0</span> active / <span class="inactive">0</span> inactive</small>
                </div>
              </div>
            </div>

            <div class="gcard">
              <h4 class="gcard-title">Total No. of Archivers</h4>
              <div class="semi-donut gauge" id="gauge-archivers" data-fill="#12b76a"
                style="--percentage:0; --fill:#12b76a">
                <div class="gtext">
                  <b class="total">0</b>
                  <small><span class="active">0</span> active / <span class="inactive">0</span> inactive</small>
                </div>
              </div>
            </div>

            <div class="gcard">
              <h4 class="gcard-title">Total No. of Controllers</h4>
              <div class="semi-donut gauge" id="gauge-controllers" data-fill="#12b76a"
                style="--percentage:0; --fill:#12b76a">
                <div class="gtext">
                  <b class="total">0</b>
                  <small><span class="active">0</span> active / <span class="inactive">0</span> inactive</small>
                </div>
              </div>
            </div>

            <div class="gcard">
              <h4 class="gcard-title">TOTAL No. of CCURE</h4>
              <div class="semi-donut gauge" id="gauge-ccure" data-fill="#12b76a" style="--percentage:0; --fill:#12b76a"" >
                  <div class=" gtext">
                <b class="total">0</b>
                <small><span class="active">0</span> active / <span class="inactive">0</span> inactive</small>
              </div>
            </div>
          </div>

          <!-- Updated Offline Device Card with new class -->
          <div class="offline-device-card">
            <h4 class="gcard-title">Offline Device</h4>
            <div class="chart-container">
              <canvas id="DotOfflineDevice"></canvas>
            </div>
          </div>

          <div class="totacl-gcard wide gcard-pie offline-device-card">
            <h4 class="gcard-title">Total Count </h4>
            <div class="chart-placeholder"></div>
          </div>

        </div>
        <!-- .......................................... -->

        <!-- RIGHT PANEL â€” WORLD MAP -->
        <div class="right-panel">
          <!-- <div class="gcard tall"> -->
          <div class="">
            <div class="worldmap-wrapper">
              <!-- MAP CARD -->
              <div class="worldmap-card">
                <!-- Fullscreen Button -->
                <button id="mapFullscreenBtn" class="map-fullscreen-btn">
                  â›¶ View Full
                </button>
                <button id="mapCityOverviewBtn" class="map-CityOverview-btn">
                  City Overview
                </button>
                <!-- SIDE PANEL -->
                <div class="region-panel" id="region-panel">
                  <h4 class="panel-title">Global (City Overview)</h4>
                  <div id="region-panel-content" class="panel-content"></div>
                </div>

                <div id="realmap"></div>

                <!-- Legend + Controls Row -->
                <div class="map-bottom-bar">

                  <!-- Legend -->
                  <div class="legend">
                    <div class="legend-item">
                      <i class="bi bi-camera"></i>
                      Camera
                    </div>
                    <div class="legend-item">
                      <i class="bi bi-hdd"></i> Controller
                    </div>
                    <div class="legend-item">
                      <i class="fa-duotone fa-solid fa-server"></i> Server
                    </div>
                    <div class="legend-item">
                      <i class="fas fa-database "></i> Archiver
                    </div>
                  </div>

                  <!-- Controls -->
                  <div class="map-controls">
                    <button id="fit-all" class="btn-ghost">Fit All</button>
                    <button id="show-global" class="btn-gv">Global View</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="gcard wide" id="Loc-Count-chart">
            <h4 class="gcard-title">LOC Count</h4>
            <canvas id="cityBarChart"></canvas>
          </div>

        </div>



  </div>
  </div>
  </section>

  </main>


  </div>


  <!-- Modal -->
  <div id="modal">
    <div class="modal-content">
      <span id="close-modal">&times;</span>
      <h3 id="modal-title">Device Details</h3>
      <ul id="modal-body"></ul>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <p>
      <img src="images/new-header.png" alt="Company Logo" class="footer-logo" />
    </p>

    <p style="color: #fff;">&copy; 2025 VisionWatch | Powered by <strong style="color: #ffcc00;">Western Union
        Services India Pvt Ltd.</strong></p>
    <p style="color: #fff;">Contact:
      <a href="mailto:gsoc-globalsecurityoperationcenter.sharedmailbox@westernunion.com">Email</a> |
      <a href="tel:+912067632394">+91 20 67632394</a>
    </p>
  </footer>

  <div id="mapFullscreenModal">
    <span id="closeFullscreenBtn">âœ–</span>
    <div id="fullscreenMap"></div>
  </div>




  <script src="script.js"></script>
  <script src="graph.js"></script>
  <script src="map.js"></script>
  <script src="trend.js"></script>
  <script src="summary.js"></script>


  <script>
    // Sidebar Toggle Functionality
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebarToggle');
    const closeSidebar = document.getElementById('closeSidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');

    function openSidebar() {
      sidebar.classList.add('active');
      sidebarOverlay.classList.add('active');
      sidebarToggle.style.display = 'none';   // HIDE TOGGLE BUTTON
      document.body.style.overflow = 'hidden';
    }


    function closeSidebarFunc() {
      sidebar.classList.remove('active');
      sidebarOverlay.classList.remove('active');
      sidebarToggle.style.display = 'block';  // SHOW TOGGLE BUTTON
      document.body.style.overflow = 'auto';
    }

    sidebarToggle.addEventListener('click', openSidebar);
    closeSidebar.addEventListener('click', closeSidebarFunc);
    sidebarOverlay.addEventListener('click', closeSidebarFunc);

    // Theme Toggle
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('theme-light');
      const icon = themeToggle.querySelector('i');
      if (document.body.classList.contains('theme-light')) {
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
      } else {
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
      }
    });
  </script>

</body>

</html>
